name: Test Ruby Installation

on: # run this workflow when a push has been made to `Jekyll-Alf` branch
  push:
    branches:
      - Jekyll-Alf


jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
        - uses: actions/checkout@v2
        - uses: actions/setup-ruby@v1
          with:
            ruby-version: '2.6' # Version range or exact version of a Ruby version to use, using semvers version range syntax.
       
        #- name: Gem Cache 
        - uses: actions/cache@v2
          with:
            path: ~/.npm
            key: ${{ runner.os }}-node-${{ hashFiles('Gemfile') }}
            restore-keys: |
                ${{ runner.os }}-node-
    
        - name: Running basic Ruby script
          run: ruby hello.rb
        
        - name: Install Ruby dependencies
          run: bundle check --path=vendor/bundle || bundle install --path=vendor/bundle
          
        - name: Install Jekyll-Alf